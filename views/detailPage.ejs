<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒì„¸í˜ì´ì§€</title>
    <link rel="stylesheet" href="../css/detailPage.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/footer.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,300,0,0" />
</head>

<body>
    <%- include ('./header.ejs') %>

        <div class="detail-container">


            <div class="detail-bookcover"><img
                    src='https://image.aladin.co.kr/product/29234/63/cover500/e812539457_1.jpg'>
            </div>
            <div class="detail-info">
                <div class="detail-info-box">
                    <div class="detail-title-box">
                        <div class="detail-info-category">
                            <%= bookInfo.category%>
                        </div>
                        <div class="detail-price-box">
                            <div class="detail-info-name">
                                <%= bookInfo.productName%>
                            </div>
                            <div class="detail-info-price">
                                <%= bookInfo.price.toLocaleString()%>ì›
                            </div>
                        </div>
                    </div>
                    <div class="detail-explain-box">
                        <div class="detail-explain-title">ìƒí’ˆì„¤ëª…</div>
                    </div>



                    <div class="detail-text">
                        <pre>
<%= bookInfo.desc%>
                    </pre>
                    </div>


                    <div class="detail-cart-payment">

                        <button class="detail-add-cart" onclick="moveCart()">
                            <span class="material-symbols-outlined">add_shopping_cart </span>
                            <span class="add-cart-text">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</span>
                        </button>
                        <div class="add-book-count"><input type="number" step="1" min="1" value="1" id="books">&ensp;ê¶Œ
                        </div>

                        <button class="detail-payment-btn" onclick="booksPrice()">êµ¬ë§¤í•˜ê¸°</button>

                    </div>
                </div>
            </div>
        </div>
        </div>
        <%-include('footer.ejs') %>
</body>

<script>

    // ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° ëˆ„ë¥´ë©´ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
    function putCart(f) {
        const cartAddListArr = [f.itemName.value, Number(f.itemPrice.value), Number(f.itemCount.value)];
        localStorage.setItem(f.item_key.value, JSON.stringify(cartAddListArr));
    }



    //êµ¬ë§¤í•˜ê¸° í´ë¦­ ì‹œ ì˜¤ë”í˜ì´ì§€ë¡œ ì´ë™
    function booksPrice() {
        window.location.assign('/order/<%= bookInfo.bookNum%>')
    }


    //ë¡œê·¸ì•„ì›ƒ ìƒíƒœ ì‹œ ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ ë§ê³  ALERT > ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
    //ë¡œê·¸ì¸ ìƒíƒœ ì‹œ ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ë¡œ CONFIRM >  ì´ë™
    function moveCart() {
        if ("<%=userEmail%>" == "") {
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.");
            window.open("/user/login");
        } else {
            let str = "ğŸ«¡ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ìŠµë‹ˆë‹¤! \n ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ë¡œ ì´ë™í• ê¹Œìš”?";
            let type;
            type = confirm(str);
            if (type) {
                window.open("/cart");
            }
        }
    }

</script>

</html>